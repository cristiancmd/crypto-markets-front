<div class="container mt-4">
  <h3>Nuevo exchange</h3>

  <form
    class="row needs-validation mt-4"
    novalidate
    [formGroup]="newExchange"
    (ngSubmit)="addExchange()"
  >
    <div class="row">
      <div class="input-field">
        <label for="name">Nombre</label>
        <input
          id="name"
          type="text"
          class="form-control"
          formControlName="name"
        />
      </div>

      <div class="invalid-feedback">Debe completar este campo.</div>
    </div>

    <div class="row">
      <div class="input-field col s12">
        <label for="url">Url</label>
        <input
          id="url"
          type="text"
          class="form-control"
          formControlName="url"
        />
      </div>
    </div>
    <div class="row">
      <div class="md-textarea">
        <label for="script">Script</label>
        <ngx-codemirror
        [(ngModel)]= "javascriptinitvar"
          [options]="{
            lineNumbers: true,
            theme: 'material',
            mode: 'javascript'
          }"
          formControlName="script"
          type="text"
          id="script"
          #script
        ></ngx-codemirror>

      <div>
        <button type="button" (click)="test(script.value)" class="btn btn-primary mt-3">Testear</button>

      </div>
      </div>
      <div class="container mt-4 mb-4">
        <span *ngIf="submited && newExchange.invalid" class="badge bg-danger">
          Debe completar todos los campos!
        </span>
      </div>

      <div class="container">
        <div class="row justify-content-center">
          <div class="col-1">
            <button
              type="text"
              class="btn btn-outline-secondary"
              routerLink="/exchanges"
            >
              Volver
            </button>
          </div>

          <div class="col-1">
            <button type="submit" class="btn btn-outline-primary">
              Aceptar
            </button>
          </div>
        </div>
      </div>
    </div>
  </form>




  <ng-template #content let-modal>
    <div class="modal-header">
      <h4 class="modal-title">Error</h4>
      <button type="btn btn-light" class="btn btn-light" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <p>El script no retorn√≥ ningun valor!</p>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-light" (click)="modal.close('Close click')">Close</button>
    </div>
  </ng-template>

  <ng-template #content2 let-modal>
    <div class="modal-header">
      <h4 class="modal-title">Exito</h4>
      <button type="button" class=" btn btn-light" aria-label="Close" (click)="modal.dismiss('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <p>El script retorno el valor: {{this.scriptval}} </p>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-light" (click)="modal.close('Close click')">Close</button>
    </div>
  </ng-template>


</div>
